<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create an extended SEM with OpenMx (Boker et al., 2011) using a
lavaan-style (Rosseel, 2012) syntax."><title>mxsem — mxsem • mxsem</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="mxsem — mxsem"><meta property="og:description" content="Create an extended SEM with OpenMx (Boker et al., 2011) using a
lavaan-style (Rosseel, 2012) syntax."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mxsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Latent-Growth-Curve.html">Latent-Growth-Curve</a>
    <a class="dropdown-item" href="../articles/Moderated-Nonlinear-Factor-Analysis.html">Moderated-Nonlinear-Factor-Analysis</a>
    <a class="dropdown-item" href="../articles/Syntax.html">Syntax</a>
    <a class="dropdown-item" href="../articles/create_parameter_table.html">create_parameter_table</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>mxsem</h1>
      
      <div class="d-none name"><code>mxsem.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create an extended SEM with <strong>OpenMx</strong> (Boker et al., 2011) using a
<strong>lavaan</strong>-style (Rosseel, 2012) syntax.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mxsem</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  scale_loadings <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  scale_latent_variances <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add_intercepts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_variances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_exogenous_latent_covariances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_exogenous_manifest_covariances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lbound_variances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  directed <span class="op">=</span> <span class="fu"><a href="unicode_directed.html">unicode_directed</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  undirected <span class="op">=</span> <span class="fu"><a href="unicode_undirected.html">unicode_undirected</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  return_parameter_table <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model</dt>
<dd><p>model syntax similar to <strong>lavaan</strong>'s syntax</p></dd>


<dt>data</dt>
<dd><p>raw data used to fit the model. Alternatively, an object created
with <code><a href="https://rdrr.io/pkg/OpenMx/man/mxData.html" class="external-link">OpenMx::mxData</a></code> can be used (e.g., <code>OpenMx::mxData(observed = cov(OpenMx::Bollen), means = colMeans(OpenMx::Bollen), numObs = nrow(OpenMx::Bollen), type = "cov")</code>).</p></dd>


<dt>scale_loadings</dt>
<dd><p>should the first loading of each latent variable be used for scaling?</p></dd>


<dt>scale_latent_variances</dt>
<dd><p>should the latent variances be used for scaling</p></dd>


<dt>add_intercepts</dt>
<dd><p>should intercepts for manifest variables be added automatically? If set to false, intercepts must be added manually. If no intercepts
are added, <strong>mxsem</strong> will automatically use just the observed covariances and not the observed means.</p></dd>


<dt>add_variances</dt>
<dd><p>should variances for manifest and latent variables be added automatically?</p></dd>


<dt>add_exogenous_latent_covariances</dt>
<dd><p>should covariances between exogenous latent variables be
added automatically?</p></dd>


<dt>add_exogenous_manifest_covariances</dt>
<dd><p>should covariances between exogenous manifest variables be
added automatically?</p></dd>


<dt>lbound_variances</dt>
<dd><p>should the lower bound for variances be set to 0.000001?</p></dd>


<dt>directed</dt>
<dd><p>symbol used to indicate directed effects (regressions and loadings)</p></dd>


<dt>undirected</dt>
<dd><p>symbol used to indicate undirected effects (variances and covariances)</p></dd>


<dt>return_parameter_table</dt>
<dd><p>if set to TRUE, the internal parameter table is returend
together with the mxModel</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>mxModel object that can be fitted with mxRun or mxTryHard. If return_parameter_table
is TRUE, a list with the mxModel and the parameter table is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Setting up SEM can be tedious. The <strong>lavaan</strong> (Rosseel, 2012) package provides a great syntax to
make the process easier. The objective of <strong>mxsem</strong> is to provide a similar syntax
for <strong>OpenMx</strong>. <strong>OpenMx</strong> is a flexible R package for extended SEM. However, note that
<strong>mxsem</strong> only covers a small part of the <strong>OpenMx</strong> framework by focusing on "standard"
SEM. Similar to <strong>lavaan</strong>'s <code>sem()</code>-function, <code>mxsem</code> tries to set up parts
of the model automatically (e.g., adding variances automatically or scaling the
latent variables automatically). If you want to unlock
the full potential of <strong>OpenMx</strong>, <strong>mxsem</strong> may not be the best option.</p>
<p><strong>Warning</strong>: The syntax and settings of <strong>mxsem</strong> may differ from
<strong>lavaan</strong> in some cases. See <code><a href="../articles/Syntax.html">vignette("Syntax", package = "mxsem")</a></code> for more details
on the syntax and the default arguments.</p><div class="section">
<h3 id="alternatives">Alternatives<a class="anchor" aria-label="anchor" href="#alternatives"></a></h3>


<p>You will find similar functions in the following packages:</p><ul><li><p><a href="https://github.com/mikewlcheung/metasem" class="external-link"><strong>metaSEM</strong></a> (Cheung, 2015) provides a <code>lavaan2RAM</code>
function that can be combined with the <code>create.mxModel</code> function. This combination
offers more features than <strong>mxsem</strong>. For instance, constraints of the form <code>a &lt; b</code>
are supported. In <strong>mxsem</strong> such constraints require algebras (e.g., <code>!diff; a := b - exp(diff)</code>).</p></li>
<li><p><a href="https://github.com/tbates/umx" class="external-link"><strong>umx</strong></a> (Bates et al., 2019)
provides the <code>umxRAM</code> and <code>umxLav2RAM</code> functions that can parse single <strong>lavaan</strong>-style
statements (e.g., <code>eta =~ y1 + y2 + y3</code>)
or an entire <strong>lavaan</strong> models to <strong>OpenMx</strong> models.</p></li>
<li><p><a href="https://github.com/cjvanlissa/tidySEM" class="external-link"><strong>tidySEM</strong></a> (van Lissa, 2023) provides the
<code>as_ram</code> function to translate <strong>lavaan</strong> syntax to <strong>OpenMx</strong> and also implements a unified syntax to
specify both, <strong>lavaan</strong> and <strong>OpenMx</strong> models. Additionally, it works well with the
<strong>tidyverse</strong>.</p></li>
<li><p><a href="https://github.com/OpenMx/ezMx" class="external-link"><strong>ezMx</strong></a> (Bates, et al. 2014) simplifies fitting SEM with <strong>OpenMx</strong>
and also provides a translation of <strong>lavaan</strong> models to <strong>OpenMx</strong> with the
<code>lavaan.to.OpenMx</code> function.</p></li>
</ul><p>Because <strong>mxsem</strong> implements the syntax parser from scratch, it can extend the
<strong>lavaan</strong> syntax to account for specific <strong>OpenMx</strong> features. This enables
implicit transformations with curly braces.</p>
</div>

<div class="section">
<h3 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a></h3>


<p>Cite <strong>OpenMx</strong> (Boker et al., 2011) for the modeling and <strong>lavaan</strong> for the
syntax (Rosseel, 2012). <strong>mxsem</strong> itself is just a very small package and lets
<strong>OpenMx</strong> do all the heavy lifting.</p>
</div>

<div class="section">
<h3 id="defaults">Defaults<a class="anchor" aria-label="anchor" href="#defaults"></a></h3>


<p>By default, <strong>mxsem</strong> scales latent variables by setting the loadings on the first
item to 1. This can be changed by setting <code>scale_loadings = FALSE</code> in the function
call. Setting <code>scale_latent_variances = TRUE</code> sets latent variances to 1 for
scaling.</p>
<p><strong>mxsem</strong> will add intercepts for all manifest variables as well as variances for
all manifest and latent variables. A lower bound of 1e-6 will be added to all
variances. Finally, covariances for all exogenous variables will be added.
All of these options can be changed when calling <strong>mxsem</strong>.</p>
</div>

<div class="section">
<h3 id="syntax">Syntax<a class="anchor" aria-label="anchor" href="#syntax"></a></h3>


<p>The syntax is, for the most part, identical to that of <strong>lavaan</strong>. The following
specifies loadings of a latent variable <code>eta</code> on manifest variables <code>y1</code>-<code>y4</code>:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span></code></pre><p></p></div>
<p>Regressions are specified with <code>~</code>:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>eta <span class="sc">~</span>  xi</span></code></pre><p></p></div>
<p>Add covariances with <code>~~</code></p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>eta <span class="sc">~</span>  xi</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">~</span><span class="er">~</span> x2</span></code></pre><p></p></div>
<p>Intercepts are specified with <code>~1</code></p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>eta <span class="sc">~</span>  xi</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">~</span><span class="er">~</span> x2</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>eta <span class="sc">~</span> <span class="dv">1</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="parameter-labels-and-constraints">Parameter labels and constraints<a class="anchor" aria-label="anchor" href="#parameter-labels-and-constraints"></a></h3>


<p>Add labels to parameters as follows:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>x1 <span class="sc">+</span> l2<span class="sc">*</span>x2 <span class="sc">+</span> l3<span class="sc">*</span>x3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> l4<span class="sc">*</span>y1 <span class="sc">+</span> l5<span class="sc">*</span>y2 <span class="sc">+</span> l6<span class="sc">*</span>y3</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>eta <span class="sc">~</span>  b<span class="sc">*</span>xi</span></code></pre><p></p></div>
<p>Fix parameters by using numeric values instead of labels:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>x1 <span class="sc">+</span> l2<span class="sc">*</span>x2 <span class="sc">+</span> l3<span class="sc">*</span>x3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>y1 <span class="sc">+</span> l5<span class="sc">*</span>y2 <span class="sc">+</span> l6<span class="sc">*</span>y3</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>eta <span class="sc">~</span>  b<span class="sc">*</span>xi</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="bounds">Bounds<a class="anchor" aria-label="anchor" href="#bounds"></a></h3>


<p>Lower and upper bounds allow for constraints on parameters. For instance,
a lower bound can prevent negative variances.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>x1 <span class="sc">+</span> l2<span class="sc">*</span>x2 <span class="sc">+</span> l3<span class="sc">*</span>x3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>y1 <span class="sc">+</span> l5<span class="sc">*</span>y2 <span class="sc">+</span> l6<span class="sc">*</span>y3</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>eta <span class="sc">~</span>  b<span class="sc">*</span>xi</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># residual variance for x1</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">~</span><span class="er">~</span> v<span class="sc">*</span>x1</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># bound:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>v <span class="sc">&gt;</span> <span class="dv">0</span></span></code></pre><p></p></div>
<p>Upper bounds are specified with v &lt; 10. Note that the parameter label must always
come first. The following is not allowed: <code>0 &lt; v</code> or <code>10 &gt; v</code>.</p>
</div>

<div class="section">
<h3 id="-non-linear-constraints">(Non-)linear constraints<a class="anchor" aria-label="anchor" href="#-non-linear-constraints"></a></h3>


<p>Assume that latent construct <code>eta</code> was observed twice, where <code>eta1</code> is the first
observation and <code>eta2</code> the second. We want to define the loadings of <code>eta2</code>
on its observations as <code>l_1 + delta_l1</code>. If <code>delta_l1</code> is zero, we have measurement
invariance.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>eta1 <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>y1 <span class="sc">+</span> l2<span class="sc">*</span>y2 <span class="sc">+</span> l3<span class="sc">*</span>y3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta2 <span class="ot">=</span><span class="er">~</span> l4<span class="sc">*</span>y4 <span class="sc">+</span> l5<span class="sc">*</span>y5 <span class="sc">+</span> l6<span class="sc">*</span>y6</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># define new delta-parameter</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>delta_1; <span class="sc">!</span>delta_2; <span class="sc">!</span>delta_3</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># redefine l4-l6</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>l4 <span class="sc">:</span><span class="er">=</span> l1 <span class="sc">+</span> delta_1</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>l5 <span class="sc">:</span><span class="er">=</span> l2 <span class="sc">+</span> delta_2</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>l6 <span class="sc">:</span><span class="er">=</span> l3 <span class="sc">+</span> delta_3</span></code></pre><p></p></div>
<p>Alternatively, implicit transformations can be used as follows:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>eta1 <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>y1 <span class="sc">+</span> l2<span class="sc">*</span>y2 <span class="sc">+</span> l3<span class="sc">*</span>y3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta2 <span class="ot">=</span><span class="er">~</span> {l1 <span class="sc">+</span> delta_1} <span class="sc">*</span> y4 <span class="sc">+</span> {l2 <span class="sc">+</span> delta_2} <span class="sc">*</span> y5 <span class="sc">+</span> {l3 <span class="sc">+</span> delta_3} <span class="sc">*</span> y6</span></code></pre><p></p></div>
<p>Specific labels for the transformation results can also be provided:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>eta1 <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>y1 <span class="sc">+</span> l2<span class="sc">*</span>y2 <span class="sc">+</span> l3<span class="sc">*</span>y3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>eta2 <span class="ot">=</span><span class="er">~</span> {l4 <span class="sc">:</span><span class="er">=</span> l1 <span class="sc">+</span> delta_1} <span class="sc">*</span> y4 <span class="sc">+</span> {l5 <span class="sc">:</span><span class="er">=</span> l2 <span class="sc">+</span> delta_2} <span class="sc">*</span> y5 <span class="sc">+</span> {l6 <span class="sc">:</span><span class="er">=</span> l3 <span class="sc">+</span> delta_3} <span class="sc">*</span> y6</span></code></pre><p></p></div>
<p>This is inspired by the approach in <strong>metaSEM</strong> (Cheung, 2015).</p>
</div>

<div class="section">
<h3 id="definition-variables">Definition variables<a class="anchor" aria-label="anchor" href="#definition-variables"></a></h3>


<p>Definition variables allow for person-specific parameter constraints. Use the
<code>data.</code>-prefix to specify definition variables.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>I <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>y1 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y2 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y3 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y4 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y5</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>S <span class="ot">=</span><span class="er">~</span> data.t_1 <span class="sc">*</span> y1 <span class="sc">+</span> data.t_2 <span class="sc">*</span> y2 <span class="sc">+</span> data.t_3 <span class="sc">*</span> y3 <span class="sc">+</span> data.t_4 <span class="sc">*</span> y4 <span class="sc">+</span> data.t_5 <span class="sc">*</span> y5</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>I <span class="sc">~</span> int<span class="sc">*</span><span class="dv">1</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>S <span class="sc">~</span> slp<span class="sc">*</span><span class="dv">1</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="starting-values">Starting Values<a class="anchor" aria-label="anchor" href="#starting-values"></a></h3>


<p><strong>mxsem</strong> differs from <strong>lavaan</strong> in the specification of starting values. Instead
of providing starting values in the model syntax, the <code>set_starting_values</code>
function is used.</p>
</div>

<div class="section">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h3>

<ul><li><p>Bates, T. C., Maes, H., &amp; Neale, M. C. (2019). umx: Twin and Path-Based Structural Equation Modeling in R. Twin Research and Human Genetics, 22(1), 27–41. https://doi.org/10.1017/thg.2019.2</p></li>
<li><p>Bates, T. C., Prindle, J. J. (2014). ezMx. https://github.com/OpenMx/ezMx</p></li>
<li><p>Boker, S. M., Neale, M., Maes, H., Wilde, M., Spiegel, M., Brick, T., Spies, J., Estabrook, R., Kenny, S., Bates, T., Mehta, P., &amp; Fox, J. (2011).
OpenMx: An Open Source Extended Structural Equation Modeling Framework. Psychometrika, 76(2), 306–317. https://doi.org/10.1007/s11336-010-9200-6</p></li>
<li><p>Cheung, M. W.-L. (2015). metaSEM: An R package for meta-analysis using structural equation modeling. Frontiers in Psychology, 5. https://doi.org/10.3389/fpsyg.2014.01521</p></li>
<li><p>Rosseel, Y. (2012). lavaan: An R package for structural equation modeling. Journal of Statistical Software, 48(2), 1–36. https://doi.org/10.18637/jss.v048.i02</p></li>
<li><p>van Lissa, C. J. (2023). tidySEM: Tidy Structural Equation Modeling. R package version 0.2.4, https://cjvanlissa.github.io/tidySEM/.</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># THE FOLLOWING EXAMPLE IS ADAPTED FROM LAVAAN</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/mxsem/" class="external-link">mxsem</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">'</span></span></span>
<span class="r-in"><span><span class="st">  # latent variable definitions</span></span></span>
<span class="r-in"><span><span class="st">     ind60 =~ x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">     dem60 =~ y1 + a1*y2 + b*y3 + c1*y4</span></span></span>
<span class="r-in"><span><span class="st">     dem65 =~ y5 + a2*y6 + b*y7 + c2*y8</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # regressions</span></span></span>
<span class="r-in"><span><span class="st">    dem60 ~ ind60</span></span></span>
<span class="r-in"><span><span class="st">    dem65 ~ ind60 + dem60</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # residual correlations</span></span></span>
<span class="r-in"><span><span class="st">    y1 ~~ y5</span></span></span>
<span class="r-in"><span><span class="st">    y2 ~~ y4 + y6</span></span></span>
<span class="r-in"><span><span class="st">    y3 ~~ y7</span></span></span>
<span class="r-in"><span><span class="st">    y4 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st">    y6 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st">'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">mxsem</span><span class="op">(</span>model <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>            data  <span class="op">=</span> <span class="fu">OpenMx</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/OpenMx/man/Bollen_data.html" class="external-link">Bollen</a></span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled1 with 41 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Beginning initial fit attempt</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled1 with 41 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Lowest minimum so far:  3096.94452072257</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Solution found</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Solution found!  Final fit=3096.9445 (started at 226053.29)  (1 attempt(s): 1 valid, 0 errors)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Start values from best fit:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2.17951969227074,1.81811337416475,1.44904273139336,0.604498542591087,1.29147133371279,1.17388109824386,1.30214921997094,0.898492807496343,1.13247237855642,1.20957807556503,1.9145854932506,7.40452888380707,4.99236807197458,1.32053478362367,3.15117584465316,2.17541773355732,5.01524081214556,0.0813524655757941,0.120528661602078,0.466700487209191,0.590970445925804,2.30230244435029,0.731349927237133,3.52500939251805,0.353179264102542,1.4122493599707,3.32140112844865,0.448634288141197,3.7172194317825,0.164481303610331,5.46466714938336,4.25644262724552,6.56311026417018,4.45253310577974,2.97807430845775,5.05438391596612,4.79219469558881,3.55768985928227,5.13625261913068,6.19626397439056,4.04339020550124</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/omxGetParameters.html" class="external-link">omxGetParameters</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ind60→x2    ind60→x3 ind60→dem60 ind60→dem65          a1           b </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2.17951969  1.81811337  1.44904273  0.60449854  1.29147133  1.17388110 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          c1 dem60→dem65          a2          c2       y1↔y1       y2↔y2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.30214922  0.89849281  1.13247238  1.20957808  1.91458549  7.40452888 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y3↔y3       y2↔y4       y4↔y4       y2↔y6       y6↔y6       x1↔x1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4.99236807  1.32053478  3.15117584  2.17541773  5.01524081  0.08135247 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       x2↔x2       x3↔x3       y1↔y5       y5↔y5       y3↔y7       y7↔y7 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.12052866  0.46670049  0.59097045  2.30230244  0.73134993  3.52500939 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y4↔y8       y6↔y8       y8↔y8 ind60↔ind60 dem60↔dem60 dem65↔dem65 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.35317926  1.41224936  3.32140113  0.44863429  3.71721943  0.16448130 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→y1      one→y2      one→y3      one→y4      one→y6      one→x1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5.46466715  4.25644263  6.56311026  4.45253311  2.97807431  5.05438392 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→x2      one→x3      one→y5      one→y7      one→y8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4.79219470  3.55768986  5.13625262  6.19626397  4.04339021 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model_transformations</span> <span class="op">&lt;-</span> <span class="st">'</span></span></span>
<span class="r-in"><span><span class="st">  # latent variable definitions</span></span></span>
<span class="r-in"><span><span class="st">     ind60 =~ x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">     dem60 =~ y1 + a1*y2 + b1*y3 + c1*y4</span></span></span>
<span class="r-in"><span><span class="st">     dem65 =~ y5 + a2*y6 + b2*y7 + c2*y8</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # regressions</span></span></span>
<span class="r-in"><span><span class="st">    dem60 ~ ind60</span></span></span>
<span class="r-in"><span><span class="st">    dem65 ~ ind60 + dem60</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # residual correlations</span></span></span>
<span class="r-in"><span><span class="st">    y1 ~~ y5</span></span></span>
<span class="r-in"><span><span class="st">    y2 ~~ y4 + y6</span></span></span>
<span class="r-in"><span><span class="st">    y3 ~~ y7</span></span></span>
<span class="r-in"><span><span class="st">    y4 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st">    y6 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st"># create new parameters:</span></span></span>
<span class="r-in"><span><span class="st">!delta_a</span></span></span>
<span class="r-in"><span><span class="st">!delta_b</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st"># use the model parameters and the new parameters for transformations:</span></span></span>
<span class="r-in"><span><span class="st">a2 := a1 + delta_a</span></span></span>
<span class="r-in"><span><span class="st"># let us also add an overly complicated equality constraint...</span></span></span>
<span class="r-in"><span><span class="st">delta_b := 0</span></span></span>
<span class="r-in"><span><span class="st">b2 := b1 + delta_b</span></span></span>
<span class="r-in"><span><span class="st">'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">mxsem</span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_transformations</span>,</span></span>
<span class="r-in"><span>            data  <span class="op">=</span> <span class="fu">OpenMx</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/OpenMx/man/Bollen_data.html" class="external-link">Bollen</a></span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled2 with 41 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Beginning initial fit attempt</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled2 with 41 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Lowest minimum so far:  3096.94452072522</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Solution found</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Solution found!  Final fit=3096.9445 (started at 225901.62)  (1 attempt(s): 1 valid, 0 errors)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Start values from best fit:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2.17951886916325,1.81811255128727,1.44904359028723,0.604494533510494,1.29147352891098,1.17388279702233,1.30215059021946,0.898493711643631,1.20957864510551,1.91458631372647,7.40454531371758,4.99236756988715,1.32054348667983,3.15118207994384,2.17542299592351,5.01523724078967,0.0813525044160571,0.120528400812975,0.466700664409228,0.590971140591723,2.30230354872315,0.731337997131143,3.5249956552196,0.353178416630574,1.41223965202246,3.32139158643102,0.448634638932976,3.71722405882739,0.164479938739754,5.4646693299894,4.25644938474715,6.56311129818079,4.45253590109382,2.97807351655402,5.05438441025969,4.79219591341877,3.55769102527676,5.13625463235875,6.19626615317593,4.04338894235638,-0.159000127341994</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/omxGetParameters.html" class="external-link">omxGetParameters</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ind60→x2    ind60→x3 ind60→dem60 ind60→dem65          a1          b1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2.1795189   1.8181126   1.4490436   0.6044945   1.2914735   1.1738828 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          c1 dem60→dem65          c2       y1↔y1       y2↔y2       y3↔y3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.3021506   0.8984937   1.2095786   1.9145863   7.4045453   4.9923676 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y2↔y4       y4↔y4       y2↔y6       y6↔y6       x1↔x1       x2↔x2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.3205435   3.1511821   2.1754230   5.0152372   0.0813525   0.1205284 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       x3↔x3       y1↔y5       y5↔y5       y3↔y7       y7↔y7       y4↔y8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.4667007   0.5909711   2.3023035   0.7313380   3.5249957   0.3531784 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y6↔y8       y8↔y8 ind60↔ind60 dem60↔dem60 dem65↔dem65      one→y1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.4122397   3.3213916   0.4486346   3.7172241   0.1644799   5.4646693 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→y2      one→y3      one→y4      one→y6      one→x1      one→x2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4.2564494   6.5631113   4.4525359   2.9780735   5.0543844   4.7921959 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→x3      one→y5      one→y7      one→y8     delta_a </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.5576910   5.1362546   6.1962662   4.0433889  -0.1590001 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jannik H. Orzek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>


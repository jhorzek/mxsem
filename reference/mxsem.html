<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>mxsem — mxsem • mxsem</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="mxsem — mxsem"><meta name="description" content="Create an extended SEM with OpenMx (Boker et al., 2011) using a
lavaan-style (Rosseel, 2012) syntax."><meta property="og:description" content="Create an extended SEM with OpenMx (Boker et al., 2011) using a
lavaan-style (Rosseel, 2012) syntax."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mxsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/create_parameter_table.html">create_parameter_table</a></li>
    <li><a class="dropdown-item" href="../articles/Latent-Growth-Curve.html">Latent-Growth-Curve</a></li>
    <li><a class="dropdown-item" href="../articles/Moderated-Nonlinear-Factor-Analysis.html">Moderated-Nonlinear-Factor-Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Syntax.html">Syntax</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jhorzek/mxsem/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>mxsem</h1>
      <small class="dont-index">Source: <a href="https://github.com/jhorzek/mxsem/blob/main/R/mxsem.R" class="external-link"><code>R/mxsem.R</code></a></small>
      <div class="d-none name"><code>mxsem.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create an extended SEM with <strong>OpenMx</strong> (Boker et al., 2011) using a
<strong>lavaan</strong>-style (Rosseel, 2012) syntax.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mxsem</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  scale_loadings <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  scale_latent_variances <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add_intercepts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_variances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_exogenous_latent_covariances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add_exogenous_manifest_covariances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lbound_variances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  directed <span class="op">=</span> <span class="fu"><a href="unicode_directed.html">unicode_directed</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  undirected <span class="op">=</span> <span class="fu"><a href="unicode_undirected.html">unicode_undirected</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  return_parameter_table <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>model syntax similar to <strong>lavaan</strong>'s syntax</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>raw data used to fit the model. Alternatively, an object created
with <code><a href="https://rdrr.io/pkg/OpenMx/man/mxData.html" class="external-link">OpenMx::mxData</a></code> can be used (e.g., <code>OpenMx::mxData(observed = cov(OpenMx::Bollen), means = colMeans(OpenMx::Bollen), numObs = nrow(OpenMx::Bollen), type = "cov")</code>).</p></dd>


<dt id="arg-scale-loadings">scale_loadings<a class="anchor" aria-label="anchor" href="#arg-scale-loadings"></a></dt>
<dd><p>should the first loading of each latent variable be used for scaling?</p></dd>


<dt id="arg-scale-latent-variances">scale_latent_variances<a class="anchor" aria-label="anchor" href="#arg-scale-latent-variances"></a></dt>
<dd><p>should the latent variances be used for scaling?</p></dd>


<dt id="arg-add-intercepts">add_intercepts<a class="anchor" aria-label="anchor" href="#arg-add-intercepts"></a></dt>
<dd><p>should intercepts for manifest variables be added automatically? If set to false, intercepts must be added manually. If no intercepts
are added, <strong>mxsem</strong> will automatically use just the observed covariances and not the observed means.</p></dd>


<dt id="arg-add-variances">add_variances<a class="anchor" aria-label="anchor" href="#arg-add-variances"></a></dt>
<dd><p>should variances for manifest and latent variables be added automatically?</p></dd>


<dt id="arg-add-exogenous-latent-covariances">add_exogenous_latent_covariances<a class="anchor" aria-label="anchor" href="#arg-add-exogenous-latent-covariances"></a></dt>
<dd><p>should covariances between exogenous latent variables be
added automatically?</p></dd>


<dt id="arg-add-exogenous-manifest-covariances">add_exogenous_manifest_covariances<a class="anchor" aria-label="anchor" href="#arg-add-exogenous-manifest-covariances"></a></dt>
<dd><p>should covariances between exogenous manifest variables be
added automatically?</p></dd>


<dt id="arg-lbound-variances">lbound_variances<a class="anchor" aria-label="anchor" href="#arg-lbound-variances"></a></dt>
<dd><p>should the lower bound for variances be set to 0.000001?</p></dd>


<dt id="arg-directed">directed<a class="anchor" aria-label="anchor" href="#arg-directed"></a></dt>
<dd><p>symbol used to indicate directed effects (regressions and loadings)</p></dd>


<dt id="arg-undirected">undirected<a class="anchor" aria-label="anchor" href="#arg-undirected"></a></dt>
<dd><p>symbol used to indicate undirected effects (variances and covariances)</p></dd>


<dt id="arg-return-parameter-table">return_parameter_table<a class="anchor" aria-label="anchor" href="#arg-return-parameter-table"></a></dt>
<dd><p>if set to TRUE, the internal parameter table is returend
together with the mxModel</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>mxModel object that can be fitted with mxRun or mxTryHard. If return_parameter_table
is TRUE, a list with the mxModel and the parameter table is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Setting up SEM can be tedious. The <strong>lavaan</strong> (Rosseel, 2012) package provides a great syntax to
make the process easier. The objective of <strong>mxsem</strong> is to provide a similar syntax
for <strong>OpenMx</strong>. <strong>OpenMx</strong> is a flexible R package for extended SEM. However, note that
<strong>mxsem</strong> only covers a small part of the <strong>OpenMx</strong> framework by focusing on "standard"
SEM. Similar to <strong>lavaan</strong>'s <code>sem()</code>-function, <code>mxsem</code> tries to set up parts
of the model automatically (e.g., adding variances automatically or scaling the
latent variables automatically). If you want to unlock
the full potential of <strong>OpenMx</strong>, <strong>mxsem</strong> may not be the best option.</p>
<p><strong>Warning</strong>: The syntax and settings of <strong>mxsem</strong> may differ from
<strong>lavaan</strong> in some cases. See <code><a href="../articles/Syntax.html">vignette("Syntax", package = "mxsem")</a></code> for more details
on the syntax and the default arguments.</p><div class="section">
<h3 id="alternatives">Alternatives<a class="anchor" aria-label="anchor" href="#alternatives"></a></h3>


<p>You will find similar functions in the following packages:</p><ul><li><p><a href="https://github.com/mikewlcheung/metasem" class="external-link"><strong>metaSEM</strong></a> (Cheung, 2015) provides a <code>lavaan2RAM</code>
function that can be combined with the <code>create.mxModel</code> function. This combination
offers more features than <strong>mxsem</strong>. For instance, constraints of the form <code>a &lt; b</code>
are supported. In <strong>mxsem</strong> such constraints require algebras (e.g., <code>!diff; a := b - exp(diff)</code>).</p></li>
<li><p><a href="https://github.com/tbates/umx" class="external-link"><strong>umx</strong></a> (Bates et al., 2019)
provides the <code>umxRAM</code> and <code>umxLav2RAM</code> functions that can parse single <strong>lavaan</strong>-style
statements (e.g., <code>eta =~ y1 + y2 + y3</code>)
or an entire <strong>lavaan</strong> models to <strong>OpenMx</strong> models.</p></li>
<li><p><a href="https://github.com/cjvanlissa/tidySEM" class="external-link"><strong>tidySEM</strong></a> (van Lissa, 2023) provides the
<code>as_ram</code> function to translate <strong>lavaan</strong> syntax to <strong>OpenMx</strong> and also implements a unified syntax to
specify both, <strong>lavaan</strong> and <strong>OpenMx</strong> models. Additionally, it works well with the
<strong>tidyverse</strong>.</p></li>
<li><p><a href="https://github.com/OpenMx/ezMx" class="external-link"><strong>ezMx</strong></a> (Bates, et al. 2014) simplifies fitting SEM with <strong>OpenMx</strong>
and also provides a translation of <strong>lavaan</strong> models to <strong>OpenMx</strong> with the
<code>lavaan.to.OpenMx</code> function.</p></li>
</ul><p>Because <strong>mxsem</strong> implements the syntax parser from scratch, it can extend the
<strong>lavaan</strong> syntax to account for specific <strong>OpenMx</strong> features. This enables
implicit transformations with curly braces.</p>
</div>

<div class="section">
<h3 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a></h3>


<p>Cite <strong>OpenMx</strong> (Boker et al., 2011) for the modeling and <strong>lavaan</strong> for the
syntax (Rosseel, 2012). <strong>mxsem</strong> itself is just a very small package and lets
<strong>OpenMx</strong> do all the heavy lifting.</p>
</div>

<div class="section">
<h3 id="defaults">Defaults<a class="anchor" aria-label="anchor" href="#defaults"></a></h3>


<p>By default, <strong>mxsem</strong> scales latent variables by setting the loadings on the first
item to 1. This can be changed by setting <code>scale_loadings = FALSE</code> in the function
call. Setting <code>scale_latent_variances = TRUE</code> sets latent variances to 1 for
scaling.</p>
<p><strong>mxsem</strong> will add intercepts for all manifest variables as well as variances for
all manifest and latent variables. A lower bound of 1e-6 will be added to all
variances. Finally, covariances for all exogenous variables will be added.
All of these options can be changed when calling <strong>mxsem</strong>.</p>
</div>

<div class="section">
<h3 id="syntax">Syntax<a class="anchor" aria-label="anchor" href="#syntax"></a></h3>


<p>The syntax is, for the most part, identical to that of <strong>lavaan</strong>. The following
specifies loadings of a latent variable <code>eta</code> on manifest variables <code>y1</code>-<code>y4</code>:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span></code></pre><p></p></div>
<p>Regressions are specified with <code>~</code>:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>eta <span class="sc">~</span>  xi</span></code></pre><p></p></div>
<p>Add covariances with <code>~~</code></p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>eta <span class="sc">~</span>  xi</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>x1 <span class="sc">~</span><span class="er">~</span> x2</span></code></pre><p></p></div>
<p>Intercepts are specified with <code>~1</code></p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> y1 <span class="sc">+</span> y2 <span class="sc">+</span> y3</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>eta <span class="sc">~</span>  xi</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>x1 <span class="sc">~</span><span class="er">~</span> x2</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>eta <span class="sc">~</span> <span class="dv">1</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="parameter-labels-and-constraints">Parameter labels and constraints<a class="anchor" aria-label="anchor" href="#parameter-labels-and-constraints"></a></h3>


<p>Add labels to parameters as follows:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>x1 <span class="sc">+</span> l2<span class="sc">*</span>x2 <span class="sc">+</span> l3<span class="sc">*</span>x3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> l4<span class="sc">*</span>y1 <span class="sc">+</span> l5<span class="sc">*</span>y2 <span class="sc">+</span> l6<span class="sc">*</span>y3</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>eta <span class="sc">~</span>  b<span class="sc">*</span>xi</span></code></pre><p></p></div>
<p>Fix parameters by using numeric values instead of labels:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>x1 <span class="sc">+</span> l2<span class="sc">*</span>x2 <span class="sc">+</span> l3<span class="sc">*</span>x3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>y1 <span class="sc">+</span> l5<span class="sc">*</span>y2 <span class="sc">+</span> l6<span class="sc">*</span>y3</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>eta <span class="sc">~</span>  b<span class="sc">*</span>xi</span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="bounds">Bounds<a class="anchor" aria-label="anchor" href="#bounds"></a></h3>


<p>Lower and upper bounds allow for constraints on parameters. For instance,
a lower bound can prevent negative variances.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>xi  <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>x1 <span class="sc">+</span> l2<span class="sc">*</span>x2 <span class="sc">+</span> l3<span class="sc">*</span>x3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>y1 <span class="sc">+</span> l5<span class="sc">*</span>y2 <span class="sc">+</span> l6<span class="sc">*</span>y3</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># predict eta with xi:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>eta <span class="sc">~</span>  b<span class="sc">*</span>xi</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># residual variance for x1</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>x1 <span class="sc">~</span><span class="er">~</span> v<span class="sc">*</span>x1</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># bound:</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>v <span class="sc">&gt;</span> <span class="dv">0</span></span></code></pre><p></p></div>
<p>Upper bounds are specified with v &lt; 10. Note that the parameter label must always
come first. The following is not allowed: <code>0 &lt; v</code> or <code>10 &gt; v</code>.</p>
</div>

<div class="section">
<h3 id="-non-linear-constraints">(Non-)linear constraints<a class="anchor" aria-label="anchor" href="#-non-linear-constraints"></a></h3>


<p>Assume that latent construct <code>eta</code> was observed twice, where <code>eta1</code> is the first
observation and <code>eta2</code> the second. We want to define the loadings of <code>eta2</code>
on its observations as <code>l_1 + delta_l1</code>. If <code>delta_l1</code> is zero, we have measurement
invariance.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>eta1 <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>y1 <span class="sc">+</span> l2<span class="sc">*</span>y2 <span class="sc">+</span> l3<span class="sc">*</span>y3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta2 <span class="ot">=</span><span class="er">~</span> l4<span class="sc">*</span>y4 <span class="sc">+</span> l5<span class="sc">*</span>y5 <span class="sc">+</span> l6<span class="sc">*</span>y6</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># define new delta-parameter</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">!</span>delta_1; <span class="sc">!</span>delta_2; <span class="sc">!</span>delta_3</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># redefine l4-l6</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>l4 <span class="sc">:=</span> l1 <span class="sc">+</span> delta_1</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>l5 <span class="sc">:=</span> l2 <span class="sc">+</span> delta_2</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>l6 <span class="sc">:=</span> l3 <span class="sc">+</span> delta_3</span></code></pre><p></p></div>
<p>Alternatively, implicit transformations can be used as follows:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>eta1 <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>y1 <span class="sc">+</span> l2<span class="sc">*</span>y2 <span class="sc">+</span> l3<span class="sc">*</span>y3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta2 <span class="ot">=</span><span class="er">~</span> {l1 <span class="sc">+</span> delta_1} <span class="sc">*</span> y4 <span class="sc">+</span> {l2 <span class="sc">+</span> delta_2} <span class="sc">*</span> y5 <span class="sc">+</span> {l3 <span class="sc">+</span> delta_3} <span class="sc">*</span> y6</span></code></pre><p></p></div>
<p>Specific labels for the transformation results can also be provided:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>eta1 <span class="ot">=</span><span class="er">~</span> l1<span class="sc">*</span>y1 <span class="sc">+</span> l2<span class="sc">*</span>y2 <span class="sc">+</span> l3<span class="sc">*</span>y3</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eta2 <span class="ot">=</span><span class="er">~</span> {l4 <span class="sc">:=</span> l1 <span class="sc">+</span> delta_1} <span class="sc">*</span> y4 <span class="sc">+</span> {l5 <span class="sc">:=</span> l2 <span class="sc">+</span> delta_2} <span class="sc">*</span> y5 <span class="sc">+</span> {l6 <span class="sc">:=</span> l3 <span class="sc">+</span> delta_3} <span class="sc">*</span> y6</span></code></pre><p></p></div>
<p>This is inspired by the approach in <strong>metaSEM</strong> (Cheung, 2015).</p>
</div>

<div class="section">
<h3 id="definition-variables">Definition variables<a class="anchor" aria-label="anchor" href="#definition-variables"></a></h3>


<p>Definition variables allow for person-specific parameter constraints. Use the
<code>data.</code>-prefix to specify definition variables.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>I <span class="ot">=</span><span class="er">~</span> <span class="dv">1</span><span class="sc">*</span>y1 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y2 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y3 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y4 <span class="sc">+</span> <span class="dv">1</span><span class="sc">*</span>y5</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>S <span class="ot">=</span><span class="er">~</span> data.t_1 <span class="sc">*</span> y1 <span class="sc">+</span> data.t_2 <span class="sc">*</span> y2 <span class="sc">+</span> data.t_3 <span class="sc">*</span> y3 <span class="sc">+</span> data.t_4 <span class="sc">*</span> y4 <span class="sc">+</span> data.t_5 <span class="sc">*</span> y5</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>I <span class="sc">~</span> int<span class="sc">*</span><span class="dv">1</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>S <span class="sc">~</span> slp<span class="sc">*</span><span class="dv">1</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="starting-values">Starting Values<a class="anchor" aria-label="anchor" href="#starting-values"></a></h3>


<p><strong>mxsem</strong> differs from <strong>lavaan</strong> in the specification of starting values. Instead
of providing starting values in the model syntax, the <code>set_starting_values</code>
function is used.</p>
</div>

<div class="section">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h3>

<ul><li><p>Bates, T. C., Maes, H., &amp; Neale, M. C. (2019). umx: Twin and Path-Based Structural Equation Modeling in R. Twin Research and Human Genetics, 22(1), 27–41. https://doi.org/10.1017/thg.2019.2</p></li>
<li><p>Bates, T. C., Prindle, J. J. (2014). ezMx. https://github.com/OpenMx/ezMx</p></li>
<li><p>Boker, S. M., Neale, M., Maes, H., Wilde, M., Spiegel, M., Brick, T., Spies, J., Estabrook, R., Kenny, S., Bates, T., Mehta, P., &amp; Fox, J. (2011).
OpenMx: An Open Source Extended Structural Equation Modeling Framework. Psychometrika, 76(2), 306–317. https://doi.org/10.1007/s11336-010-9200-6</p></li>
<li><p>Cheung, M. W.-L. (2015). metaSEM: An R package for meta-analysis using structural equation modeling. Frontiers in Psychology, 5. https://doi.org/10.3389/fpsyg.2014.01521</p></li>
<li><p>Rosseel, Y. (2012). lavaan: An R package for structural equation modeling. Journal of Statistical Software, 48(2), 1–36. https://doi.org/10.18637/jss.v048.i02</p></li>
<li><p>van Lissa, C. J. (2023). tidySEM: Tidy Structural Equation Modeling. R package version 0.2.4, https://cjvanlissa.github.io/tidySEM/.</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># THE FOLLOWING EXAMPLE IS ADAPTED FROM LAVAAN</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/mxsem/" class="external-link">mxsem</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">'</span></span></span>
<span class="r-in"><span><span class="st">  # latent variable definitions</span></span></span>
<span class="r-in"><span><span class="st">     ind60 =~ x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">     dem60 =~ y1 + a1*y2 + b*y3 + c1*y4</span></span></span>
<span class="r-in"><span><span class="st">     dem65 =~ y5 + a2*y6 + b*y7 + c2*y8</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # regressions</span></span></span>
<span class="r-in"><span><span class="st">    dem60 ~ ind60</span></span></span>
<span class="r-in"><span><span class="st">    dem65 ~ ind60 + dem60</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # residual correlations</span></span></span>
<span class="r-in"><span><span class="st">    y1 ~~ y5</span></span></span>
<span class="r-in"><span><span class="st">    y2 ~~ y4 + y6</span></span></span>
<span class="r-in"><span><span class="st">    y3 ~~ y7</span></span></span>
<span class="r-in"><span><span class="st">    y4 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st">    y6 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st">'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">mxsem</span><span class="op">(</span>model <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>            data  <span class="op">=</span> <span class="fu">OpenMx</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/OpenMx/man/Bollen_data.html" class="external-link">Bollen</a></span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled16 with 41 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Beginning initial fit attempt</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled16 with 41 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Lowest minimum so far:  3096.94452072454</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Solution found</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Solution found!  Final fit=3096.9445 (started at 226053.29)  (1 attempt(s): 1 valid, 0 errors)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Start values from best fit:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2.17951987773111,1.81811280701136,1.44903971585263,0.604497109020104,1.2914705087076,1.17388194480817,1.30214833592763,0.898493075089598,1.1324734492235,1.20957839087818,1.91458020207026,7.40452084345933,4.99235939692914,1.32054688622592,3.15118547115015,2.17540111771095,5.0152306057039,0.0813525457778652,0.120528431147638,0.466700862872675,0.590970527832852,2.30230807957473,0.731339590208144,3.52499601408348,0.353182177765634,1.41225190814923,3.32140676951725,0.448633932250771,3.71721598526889,0.164480652182256,5.46466355896305,4.25643995945798,6.56310792761437,4.4525276703987,2.97807303177841,5.05438328541841,4.7921934164438,3.55768869770291,5.13624831577953,6.19625910503793,4.04338865506019</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/omxGetParameters.html" class="external-link">omxGetParameters</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ind60→x2    ind60→x3 ind60→dem60 ind60→dem65          a1           b </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2.17951988  1.81811281  1.44903972  0.60449711  1.29147051  1.17388194 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          c1 dem60→dem65          a2          c2       y1↔y1       y2↔y2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.30214834  0.89849308  1.13247345  1.20957839  1.91458020  7.40452084 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y3↔y3       y2↔y4       y4↔y4       y2↔y6       y6↔y6       x1↔x1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4.99235940  1.32054689  3.15118547  2.17540112  5.01523061  0.08135255 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       x2↔x2       x3↔x3       y1↔y5       y5↔y5       y3↔y7       y7↔y7 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.12052843  0.46670086  0.59097053  2.30230808  0.73133959  3.52499601 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y4↔y8       y6↔y8       y8↔y8 ind60↔ind60 dem60↔dem60 dem65↔dem65 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.35318218  1.41225191  3.32140677  0.44863393  3.71721599  0.16448065 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→y1      one→y2      one→y3      one→y4      one→y6      one→x1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5.46466356  4.25643996  6.56310793  4.45252767  2.97807303  5.05438329 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→x2      one→x3      one→y5      one→y7      one→y8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4.79219342  3.55768870  5.13624832  6.19625911  4.04338866 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model_transformations</span> <span class="op">&lt;-</span> <span class="st">'</span></span></span>
<span class="r-in"><span><span class="st">  # latent variable definitions</span></span></span>
<span class="r-in"><span><span class="st">     ind60 =~ x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">     dem60 =~ y1 + a1*y2 + b1*y3 + c1*y4</span></span></span>
<span class="r-in"><span><span class="st">     dem65 =~ y5 + {a2 := a1 + delta_a}*y6 + {b2 := b1 + delta_b}*y7 + c2*y8</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # regressions</span></span></span>
<span class="r-in"><span><span class="st">    dem60 ~ ind60</span></span></span>
<span class="r-in"><span><span class="st">    dem65 ~ ind60 + dem60</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">  # residual correlations</span></span></span>
<span class="r-in"><span><span class="st">    y1 ~~ y5</span></span></span>
<span class="r-in"><span><span class="st">    y2 ~~ y4 + y6</span></span></span>
<span class="r-in"><span><span class="st">    y3 ~~ y7</span></span></span>
<span class="r-in"><span><span class="st">    y4 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st">    y6 ~~ y8</span></span></span>
<span class="r-in"><span><span class="st">'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">mxsem</span><span class="op">(</span>model <span class="op">=</span> <span class="va">model_transformations</span>,</span></span>
<span class="r-in"><span>            data  <span class="op">=</span> <span class="fu">OpenMx</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/OpenMx/man/Bollen_data.html" class="external-link">Bollen</a></span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled19 with 42 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Beginning initial fit attempt</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running untitled19 with 42 parameters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Lowest minimum so far:  3095.58188681023</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Solution found</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Solution found!  Final fit=3095.5819 (started at 225616.79)  (1 attempt(s): 1 valid, 0 errors)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  Start values from best fit:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2.18036692502419,1.8185110842876,1.48299713907554,0.572339861173599,1.25674950145635,1.05771651270941,1.26478738795161,0.837345234806707,1.26594677757215,1.89139933687739,7.37285050090153,5.06747712630144,1.31312234445956,3.14792354607904,2.15286574816779,4.95395470168421,0.0815493292024986,0.119806744784092,0.466702792790979,0.623669558954236,2.35097477433781,0.794960818250051,3.43139043112232,0.34822384350209,1.35615768074408,3.25408176784843,0.448438066317501,3.95602557364003,0.172474415796178,5.46467040485137,4.25645067885819,6.56311263149745,4.45253722882951,2.97808065434922,5.054384557668,4.7921959164682,3.55769087542126,5.13625612535699,6.19626561257264,4.0433958742259,-0.0710524345068419,0.221794335683815</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/omxGetParameters.html" class="external-link">omxGetParameters</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ind60→x2    ind60→x3 ind60→dem60 ind60→dem65          a1          b1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2.18036693  1.81851108  1.48299714  0.57233986  1.25674950  1.05771651 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          c1 dem60→dem65          c2       y1↔y1       y2↔y2       y3↔y3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.26478739  0.83734523  1.26594678  1.89139934  7.37285050  5.06747713 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y2↔y4       y4↔y4       y2↔y6       y6↔y6       x1↔x1       x2↔x2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.31312234  3.14792355  2.15286575  4.95395470  0.08154933  0.11980674 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       x3↔x3       y1↔y5       y5↔y5       y3↔y7       y7↔y7       y4↔y8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.46670279  0.62366956  2.35097477  0.79496082  3.43139043  0.34822384 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       y6↔y8       y8↔y8 ind60↔ind60 dem60↔dem60 dem65↔dem65      one→y1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.35615768  3.25408177  0.44843807  3.95602557  0.17247442  5.46467040 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→y2      one→y3      one→y4      one→y6      one→x1      one→x2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4.25645068  6.56311263  4.45253723  2.97808065  5.05438456  4.79219592 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      one→x3      one→y5      one→y7      one→y8     delta_a     delta_b </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3.55769088  5.13625613  6.19626561  4.04339587 -0.07105243  0.22179434 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jannik H. Orzek.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>


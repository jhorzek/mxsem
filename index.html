<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides a lavaan-like syntax for OpenMx models. Supports 
  definition variables, bounds, and parameter transformations.">
<title>Parse lavaan-like syntax for OpenMx models â€¢ mxsem</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Parse lavaan-like syntax for OpenMx models">
<meta property="og:description" content="Provides a lavaan-like syntax for OpenMx models. Supports 
  definition variables, bounds, and parameter transformations.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">mxsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="mxsem">mxsem<a class="anchor" aria-label="anchor" href="#mxsem"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p><strong>mxsem</strong> provides a <strong>lavaan</strong>-like syntax to implement structural equation models (SEM) with <strong>OpenMx</strong>. The objective is to simplify fitting basic SEM with <strong>OpenMx</strong> and to allow users to easily switch between <strong>lavaan</strong> and <strong>OpenMx</strong>. The latter can be useful if one of the two packages reports non-convergence or other issues. Additionally, <strong>mxsem</strong> allows for parameter transformations and definition variables.</p>
<blockquote>
<p><strong>Warning</strong>: The syntax and settings of <strong>mxsem</strong> may differ from <strong>lavaan</strong> in some cases. See <code><a href="reference/mxsem.html">?mxsem::mxsem</a></code> for more details on the syntax and the default arguments.</p>
</blockquote>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The newest version of the package can be installed from GitHub using the following commands in R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jhorzek/mxsem"</span>, </span>
<span>                         ref <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The following example is directly adapted from <strong>lavaan</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/mxsem/" class="external-link">mxsem</a></span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">  # latent variable definitions</span></span>
<span><span class="st">     ind60 =~ x1 + x2 + x3</span></span>
<span><span class="st">     dem60 =~ y1 + a1*y2 + b*y3 + c1*y4</span></span>
<span><span class="st">     dem65 =~ y5 + a2*y6 + b*y7 + c2*y8</span></span>
<span><span class="st"></span></span>
<span><span class="st">  # regressions</span></span>
<span><span class="st">    dem60 ~ ind60</span></span>
<span><span class="st">    dem65 ~ ind60 + dem60</span></span>
<span><span class="st"></span></span>
<span><span class="st">  # residual correlations</span></span>
<span><span class="st">    y1 ~~ y5</span></span>
<span><span class="st">    y2 ~~ y4 + y6</span></span>
<span><span class="st">    y3 ~~ y7</span></span>
<span><span class="st">    y4 ~~ y8</span></span>
<span><span class="st">    y6 ~~ y8</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="fu"><a href="reference/mxsem.html">mxsem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model</span>,</span>
<span>      data  <span class="op">=</span> <span class="fu">OpenMx</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/OpenMx/man/Bollen_data.html" class="external-link">Bollen</a></span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-bounds">Adding bounds<a class="anchor" aria-label="anchor" href="#adding-bounds"></a>
</h2>
<p>Lower and upper bounds can be added to any of the parameters in the model. The following demonstrates bounds on a loading:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/mxsem/" class="external-link">mxsem</a></span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">  # latent variable definitions</span></span>
<span><span class="st">     ind60 =~ x1 + x2 + x3</span></span>
<span><span class="st">     dem60 =~ y1 + a1*y2 + b*y3 + c1*y4</span></span>
<span><span class="st">     dem65 =~ y5 + a2*y6 + b*y7 + c2*y8</span></span>
<span><span class="st">     </span></span>
<span><span class="st">     # lower bound on a1</span></span>
<span><span class="st">     a1 &gt; 0</span></span>
<span><span class="st">     # upper bound on a2</span></span>
<span><span class="st">     a2 &lt; 10.123</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="fu"><a href="reference/mxsem.html">mxsem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model</span>,</span>
<span>      data  <span class="op">=</span> <span class="fu">OpenMx</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/OpenMx/man/Bollen_data.html" class="external-link">Bollen</a></span>, </span>
<span>      <span class="co"># use latent variances to scale the model</span></span>
<span>      scale_loadings <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>      scale_latent_variances <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>mxsem</strong> adds lower bounds to any of the variances by default. To remove these lower bounds, set <code>lbound_variances = FALSE</code> when calling <code><a href="reference/mxsem.html">mxsem()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="definition-variables">Definition Variables<a class="anchor" aria-label="anchor" href="#definition-variables"></a>
</h2>
<p>Definition variables are, for instance, used in latent growth curve models when the time intervals between observations are different for the subjects in the data set. Here is an example, where the variables <code>t_1</code>-<code>t_5</code> indicate the person-specific times of observation:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/mxsem/" class="external-link">mxsem</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">3489</span><span class="op">)</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/simulate_latent_growth_curve.html">simulate_latent_growth_curve</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span>
<span><span class="co">#&gt;             y1       y2       y3        y4         y5 t_1       t_2      t_3</span></span>
<span><span class="co">#&gt; [1,] 1.2817946 5.159870 7.178191  8.950046 11.4822306   0 1.5792322 2.304777</span></span>
<span><span class="co">#&gt; [2,] 1.1796379 3.588279 5.927219  8.381157 10.4640667   0 1.6701976 3.530621</span></span>
<span><span class="co">#&gt; [3,] 0.2196010 0.763441 2.499564  3.672995  4.4505868   0 0.6452145 2.512730</span></span>
<span><span class="co">#&gt; [4,] 0.5688185 1.440709 1.523483  1.416965  1.9674847   0 1.7171826 3.245522</span></span>
<span><span class="co">#&gt; [5,] 3.4928919 2.620657 1.753159  1.080701 -0.4436508   0 1.4055839 2.024568</span></span>
<span><span class="co">#&gt; [6,] 0.3520293 5.126854 7.390669 10.721785 12.6363472   0 1.5249299 2.400432</span></span>
<span><span class="co">#&gt;           t_4      t_5</span></span>
<span><span class="co">#&gt; [1,] 3.120797 4.217403</span></span>
<span><span class="co">#&gt; [2,] 5.004695 6.408367</span></span>
<span><span class="co">#&gt; [3,] 3.761189 4.729461</span></span>
<span><span class="co">#&gt; [4,] 4.331997 6.145424</span></span>
<span><span class="co">#&gt; [5,] 3.570780 5.517224</span></span>
<span><span class="co">#&gt; [6,] 3.654230 4.222212</span></span></code></pre></div>
<p>In <strong>OpenMx</strong>, parameters can be set to the values found in the columns of the data set with the <code>data.</code> prefix. This is used in the following to fix the loadings of a latent slope variable on the observations to the times recorded in <code>t_1</code>-<code>t_5</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/mxsem/" class="external-link">mxsem</a></span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  I =~ 1*y1 + 1*y2 + 1*y3 + 1*y4 + 1*y5</span></span>
<span><span class="st">  S =~ data.t_1 * y1 + data.t_2 * y2 + data.t_3 * y3 + data.t_4 * y4 + data.t_5 * y5</span></span>
<span><span class="st"></span></span>
<span><span class="st">  I ~ int*1</span></span>
<span><span class="st">  S ~ slp*1</span></span>
<span><span class="st">  "</span></span>
<span></span>
<span><span class="fu"><a href="reference/mxsem.html">mxsem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model</span>,</span>
<span>      data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>      add_intercepts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="transformations">Transformations<a class="anchor" aria-label="anchor" href="#transformations"></a>
</h2>
<p>Sometimes, one may want to express one parameter as a function of other parameters. For instance, in moderated non-linear factor analysis, model parameters are often expressed in terms of a covariate k. For instance, the effect <span class="math inline"><em>a</em></span> of <span class="math inline"><em>Î¾</em></span> on <span class="math inline"><em>Î·</em></span> could be expressed as <span class="math inline"><em>a</em>â€„=â€„<em>a</em><sub>0</sub>â€…+â€…<em>a</em><sub>1</sub>â€…Ã—â€…<em>k</em></span>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhorzek.github.io/mxsem/" class="external-link">mxsem</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">9820</span><span class="op">)</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/simulate_moderated_nonlinear_factor_analysis.html">simulate_moderated_nonlinear_factor_analysis</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span>
<span><span class="co">#&gt;              x1         x2         x3          y1         y2            y3 k</span></span>
<span><span class="co">#&gt; [1,] -1.2166034 -1.2374549 -1.3731943 -1.01018683 -0.8296293 -1.2300555484 0</span></span>
<span><span class="co">#&gt; [2,]  1.1911346  0.9971499  1.0226322  0.86048030  0.4509088  0.6052786392 1</span></span>
<span><span class="co">#&gt; [3,] -0.7777169 -0.4725291 -0.8507347 -1.09582848 -0.5035753 -0.8048378456 0</span></span>
<span><span class="co">#&gt; [4,]  1.0027847  1.2351709  0.6951317  0.94040287  0.6684979  0.6596891858 0</span></span>
<span><span class="co">#&gt; [5,]  0.4387896  0.3919877  0.3260557 -0.58188691 -0.3614349 -0.4901022121 0</span></span>
<span><span class="co">#&gt; [6,] -1.4951549 -0.8834637 -1.1715535  0.01173845 -0.4697865 -0.0006475256 0</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">xi =~ x1 + x2 + x3</span></span>
<span><span class="st">eta =~ y1 + y2 + y3</span></span>
<span><span class="st">eta ~ a*xi</span></span>
<span><span class="st"></span></span>
<span><span class="st"># we need two new parameters: a0 and a1. These are created as follows:</span></span>
<span><span class="st">!a0</span></span>
<span><span class="st">!a1</span></span>
<span><span class="st"># Now, we redefine a to be a0 + k*a1, where k is found in the data</span></span>
<span><span class="st">a := a0 + data.k*a1</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="fu"><a href="reference/mxsem.html">mxsem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model</span>,</span>
<span>      data <span class="op">=</span> <span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/OpenMx/man/mxTryHard.html" class="external-link">mxTryHard</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adapting-the-model">Adapting the Model<a class="anchor" aria-label="anchor" href="#adapting-the-model"></a>
</h2>
<p><code>mxsem</code> returns an <code>mxModel</code> object that can be adapted further by users familiar with <strong>OpenMx</strong>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mxsem</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jannik H. Orzek <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-3123-2248" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jannik H. Orzek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
